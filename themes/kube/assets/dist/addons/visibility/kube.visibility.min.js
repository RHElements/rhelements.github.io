Kube.add("module","visibility",{init:function(i,t){this.app=i,this.$win=i.$win,this.context=t,this.params=t.getParams({tolerance:15}),this.$element=t.getElement()},start:function(){this.$win.on("scroll.kube.visibility resize.kube.visibility",this._check.bind(this)),this._check()},stop:function(){this.$win.off(".kube.visibility")},_check:function(){var i=this.$win.scrollTop(),t=i+this.$win.height(),s=this.$element.offset().top,e=s+this.$element.height();e>=i&&s<=t&&e<=t+this.params.tolerance&&s>=i?this.app.broadcast("visibility.visible",this,this.$element):this.app.broadcast("visibility.invisible",this,this.$element)}});